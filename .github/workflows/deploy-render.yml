name: Deploy to Render

on:
  push:
    branches:
      - MergeCalidad
  workflow_dispatch:

env:
  SERVICE_HOOK: ${{ secrets.RENDER_ORDENES_DEPLOY_HOOK }}

jobs:
  trigger-render:
    runs-on: ubuntu-latest
    steps:
      - name: Trigger Render deploy
        if: env.SERVICE_HOOK != ''
        shell: bash
        run: curl -fsSL -X POST "$SERVICE_HOOK"
      - name: Missing deploy hook warning
        if: env.SERVICE_HOOK == ''
        run: |
          echo "Render deploy hook secret (RENDER_ORDENES_DEPLOY_HOOK) is not configured." >&2
          exit 1
